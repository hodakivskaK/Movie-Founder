"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[31],{633:function(e,t,n){n.d(t,{LZ:function(){return p},cd:function(){return v},eK:function(){return _},kK:function(){return f},l2:function(){return d}});var r=n(861),a=n(757),c=n.n(a),o=n(243),s="c93a6a4d3a553d1e7ad5324e4c95943f";o.Z.defaults.baseURL="https://api.themoviedb.org/3";var i="/trending/movie/week",u="/search/movie",l="/movie",m="/credits",h="/reviews",p=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,o.Z.get("".concat(i,"?api_key=").concat(s,"&page=").concat(t,"&language=en-US&include_adult=false"));case 3:return n=e.sent,e.abrupt("return",n.data.results);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1,e.next=3,o.Z.get("".concat(u,"?api_key=").concat(s,"&page=").concat(n,"&query=").concat(t,"&language=en-US&include_adult=false"));case 3:return r=e.sent,e.abrupt("return",r.data.results);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("".concat(l,"/").concat(t,"?api_key=").concat(s,"&language=en-US"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("/movie/".concat(t).concat(m,"?api_key=").concat(s,"&language=en-US"));case 2:return n=e.sent,e.abrupt("return",n.data.cast);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("/movie/".concat(t).concat(h,"?api_key=").concat(s,"&language=en-US"));case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},31:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(439),a=n(791),c=n(87),o=n(689),s=n(633),i={searchForm:"SearchForm_searchForm__7M8nt",searchForm__input:"SearchForm_searchForm__input__544XX",SearchForm__button:"SearchForm_SearchForm__button__xcWfA"},u=n(184),l=function(e){var t=e.onSubmit,n=(0,a.useState)(""),c=(0,r.Z)(n,2),o=c[0],s=c[1];return(0,u.jsxs)("div",{className:i.d,children:[(0,u.jsx)("h1",{children:" Find a movie by a title "}),(0,u.jsxs)("form",{className:i.searchForm,onSubmit:function(e){if(e.preventDefault(),""===o.trim())return console.log("Field is empty");t(o),s(""),e.currentTarget.reset()},children:[(0,u.jsx)("input",{className:i.searchForm__input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:function(e){s(e.currentTarget.value.toLowerCase())}}),(0,u.jsx)("button",{type:"submit",className:i.SearchForm__button,children:"Search"})]})]})},m="MovieSearchList_moviesSearch__list__4fPpU",h="MovieSearchList_moviesSearch__item__n+FzM",p="MovieSearchList_moviesSearch__link__hgRO3",_="MovieSearchList_moviesSearch__img__dOQqa",d="MovieSearchList_moviesSearch__poster__mWhwy",f="MovieSearchList_moviesSearch__descr__q1Owk",v="MovieSearchList_moviesSearch__title__LmyJZ",g=n(538),S=function(e){var t=e.movies;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("ul",{className:m,children:t.map((function(e){var t=e.release_date.split("-")[0];return(0,u.jsx)("li",{className:h,children:(0,u.jsxs)(c.rU,{to:"/movies/".concat(e.id),className:p,children:[(0,u.jsxs)("div",{className:f,children:[(0,u.jsxs)("p",{className:v,children:[e.title," "]}),(0,u.jsxs)("p",{children:[" Year: ",t]}),(0,u.jsxs)("p",{children:[" Rating: ",e.vote_average]})]}),null===e.poster_path?(0,u.jsx)("img",{src:g,alt:"poster",className:d}):(0,u.jsx)("img",{src:"https://image.tmdb.org/t/p/w200/".concat(e.poster_path),alt:"poster",className:_})]})},e.id)}))})})},x=n(126),w="Movies_upBtn__wW0CQ";function j(){var e=(0,c.lr)(),t=(0,r.Z)(e,2),n=t[0],i=t[1],m=(0,a.useState)([]),h=(0,r.Z)(m,2),p=h[0],_=h[1],d=(0,a.useState)(""),f=(0,r.Z)(d,2),v=f[0],g=f[1],j=(0,a.useState)(!1),y=(0,r.Z)(j,2),b=y[0],k=y[1],Z=(0,a.useState)(0),F=(0,r.Z)(Z,2),L=F[0],N=F[1];(0,a.useEffect)((function(){return window.addEventListener("scroll",M),function(){return window.removeEventListener("scroll",M)}}),[]);var M=function(){N(window.scrollY)},U=(0,o.TH)(),C=n.get("query");(0,a.useEffect)((function(){if(C){k(!0),(0,s.eK)(C).then((function(e){e.length||alert("No movies found!"),_(e)})).catch((function(e){g("Sorry, nothing"),console.log(e)})).finally(k(!1))}}),[C]);return(0,u.jsxs)("div",{children:[b&&(0,u.jsx)("h1",{children:"Loading"}),v&&(0,u.jsx)("div",{children:v}),(0,u.jsx)(l,{onSubmit:function(e){i({query:"".concat(e)}),console.log(e)}}),p&&(0,u.jsx)(S,{movies:p,prevLocation:U}),L>document.documentElement.clientHeight&&(0,u.jsx)(x.gtS,{onClick:function(e){document.body.scrollTop=0,document.documentElement.scrollTop=0},className:w})]})}},538:function(e,t,n){e.exports=n.p+"static/media/POSTER_not_found.059dd04c55b219df0491.jpg"}}]);
//# sourceMappingURL=31.177dc307.chunk.js.map